function starLength(n,t){for(var r=n.toString().split(".")[0],e="."+n.toString().split(".")[1],f="",u=_p(t).find(".star-wrap").output,i=0;i<u.length;i++)f=r==5||i<r?"100%":i==r?Math.ceil(10*parseFloat(e))*10+"%":"",_p(u[i]).find(".star-bg").css("width",f),_p(u[i]).find(".star-bg").css("transform","skew(0)");_p(t).find(".sr-only").html("Review has "+n+" stars.")}function inViewport(n){var t=n.dimensions();return t.top-t.height+100<=0}function reviewHeight(n){_p(n).find(".review p").dimensions().height>84&&!_p(n).hasClass("full")?_p(n).addClass("shorten"):_p(n).find(".review p").dimensions().height<=84&&_p(n).hasClass("full")?(_p(n).removeClass("full"),_p(n).find(".read-more").removeClass("less"),_p(n).find(".read-more a").text("Read more")):_p(n).removeClass("shorten")}_p(document).ready(function(){var r=_p(".ratings .rating-title-wrap span").text(),u=_p(".store-stars").output,i,n,t;for(starLength(r,u),i=_p("#reviews .stars").output,n=0;n<i.length;n++){var f=_p(i[n]).parent(),e=f.find(".numRating span").text(),o=_p("#reviews .inner");reviewHeight(o.output[n]);starLength(e,i[n])}_p(".read-more a").on("click",function(n){var t=_p(this);n.preventDefault();setTimeout(function(){t.closest(".inner").hasClass("shorten")?t.text("Read less"):t.text("Read more");t.parent().toggleClass("less");t.closest(".inner").toggleClass("shorten full")},10)});t=_p(".ratings");window.addEventListener("scroll",function(){inViewport(t)&&t.addClass("onScreen")});_p(window).throttleResize(function(){for(var t,n=0;n<3;n++)t=_p("#reviews .inner").output[n],reviewHeight(t)});setTimeout(function(){inViewport(t)&&t.addClass("onScreen")},2e3)});